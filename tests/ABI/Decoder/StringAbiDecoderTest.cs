using EtherSharp.ABI;

namespace EtherSharp.Tests.ABI.Decoder;

public class StringAbiDecoderTest
{

    [Fact]
    public void Should_Match()
    {
        byte[] input = Convert.FromHexString("000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000036361740000000000000000000000000000000000000000000000000000000000");

        string actualOutput = new AbiDecoder(input).String();

        Assert.Equal("cat", actualOutput);
    }

    [Fact]
    public void Lorem_Ipsum()
    {
        byte[] input = Convert.FromHexString("0000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000046e4c6f72656d20697073756d20646f6c6f722073697420616d65742c20636f6e73656374657475722061646970697363696e6720656c69742e20536564206574206572617420626962656e64756d2c20636f6e76616c6c6973206e697369207365642c20626c616e64697420646f6c6f722e2043757261626974757220736564206d6178696d7573206e657175652c206e6f6e20766172697573206d692e20416c697175616d206572617420766f6c75747061742e20446f6e656320616c697175657420736f6c6c696369747564696e207363656c657269737175652e2041656e65616e207574206f726369206d692e20446f6e6563206c756374757320736f64616c6573206f64696f20757420677261766964612e20416c697175616d206c6967756c61206c696265726f2c20666163696c697369732074656d706f72206d6175726973207365642c206469676e697373696d20636f6e7365637465747572206e6962682e202041656e65616e206c75637475732073617069656e2073617069656e2c20717569732073656d706572206e6571756520756c747269636965732073697420616d65742e204e616d206964206e697369206163206d6173736120666175636962757320636f6e6775652e20446f6e656320626962656e64756d206469676e697373696d2066617563696275732e20496e7465676572206575206e756e632076656c2073617069656e20766172697573206d6f6c6c6973207365642073697420616d657420657261742e204e756c6c61206575206475692061206f726369206f726e6172652072757472756d2e2043757261626974757220626c616e64697420626c616e64697420656e696d20612066617563696275732e204372617320696420707572757320636f6e736571756174206d6175726973206f726e617265206469676e697373696d206567657420717569732066656c69732e20566573746962756c756d207669746165207072657469756d206475692c2069642066657567696174206573742e204d6f726269206c656374757320697073756d2c20696163756c6973206e6f6e206f64696f206e65632c207072657469756d2074656d706f72206c696265726f2e20416c697175616d20696e206d61757269732071756973206578206d6178696d7573207072657469756d2e2046757363652061206c616f726565742073656d2c2074656d707573206c6f626f7274697320657261742e20557420636f6d6d6f646f20636f6e73656374657475722076656e656e617469732e20536564206e6f6e20726973757320706861726574726120657820636f6e73656374657475722066617563696275732e204372617320696163756c69732c20726973757320616320736f64616c657320636f6e73656374657475722c2064756920647569206d6f6c65737469652073656d2c207574206665726d656e74756d2073617069656e2065737420766974616520646f6c6f722e20496e7465676572206d616c657375616461206e697369207365642074656c6c75732074656d707573207665686963756c612e000000000000000000000000000000000000");

        string actualOutput = new AbiDecoder(input).String();

        string str = "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed et erat bibendum, convallis nisi sed, blandit dolor. Curabitur sed maximus neque, non varius mi. Aliquam erat volutpat. Donec aliquet sollicitudin scelerisque. Aenean ut orci mi. Donec luctus sodales odio ut gravida. Aliquam ligula libero, facilisis tempor mauris sed, dignissim consectetur nibh.  Aenean luctus sapien sapien, quis semper neque ultricies sit amet. Nam id nisi ac massa faucibus congue. Donec bibendum dignissim faucibus. Integer eu nunc vel sapien varius mollis sed sit amet erat. Nulla eu dui a orci ornare rutrum. Curabitur blandit blandit enim a faucibus. Cras id purus consequat mauris ornare dignissim eget quis felis. Vestibulum vitae pretium dui, id feugiat est. Morbi lectus ipsum, iaculis non odio nec, pretium tempor libero. Aliquam in mauris quis ex maximus pretium. Fusce a laoreet sem, tempus lobortis erat. Ut commodo consectetur venenatis. Sed non risus pharetra ex consectetur faucibus. Cras iaculis, risus ac sodales consectetur, dui dui molestie sem, ut fermentum sapien est vitae dolor. Integer malesuada nisi sed tellus tempus vehicula.";

        Assert.Equal(str, actualOutput);
    }
}
